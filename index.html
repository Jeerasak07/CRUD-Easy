<!DOCTYPE html>
<html>
<head>
  <title>ระบบ CRUD</title>
</head>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<body>
    <div class="container">
  <h1>ระบบ CRUD</h1>
  
  <table id="data-table" class="table table-striped  table-hover table-responsive table-bordered">
    <thead>
      <tr>
        <th>ชื่อ</th>
        <th>นามสกุล</th>
        <th>อายุ</th>
        <th>วันเดือนปี</th>
        <th>อีเมล</th>
        <th>เบอร์โทร</th>
        <th>แก้ไข</th>
        <th>ลบ</th>
      </tr>
    </thead>
    <tbody id="data-body">
      <!-- ข้อมูลจะถูกเพิ่มที่นี่ -->
    </tbody>
  </table>

  <a href="create.html">สร้างรายการใหม่</a>

  <script>
    // เมื่อหน้า index โหลดเสร็จ ดึงข้อมูลจาก Local Storage และสร้างแถวในตาราง
    document.addEventListener("DOMContentLoaded", function() {
      // ตรวจสอบว่ามีข้อมูลใน Local Storage หรือไม่
      if (localStorage.getItem("data")) {
        // ดึงข้อมูลจาก Local Storage
        var data = JSON.parse(localStorage.getItem("data"));

        // สร้างแถวในตารางสำหรับแต่ละรายการ
        for (var i = 0; i < data.length; i++) {
          var row = document.createElement("tr");
          row.innerHTML = `
            <td>${data[i].firstName}</td>
            <td>${data[i].lastName}</td>
            <td>${data[i].age}</td>
            <td>${data[i].birthday}</td>
            <td>${data[i].email}</td>
            <td>${data[i].phone}</td>
            <td><a href="edit.html?index=${i}"><button type="button" class="btn btn-warning">แก้ไข</button></a></td>
            <td><a href="delete.html?index=${i}"><button type="button" class="btn btn-danger">ลบ</button></a></td>
          `;
          document.getElementById("data-body").appendChild(row);
        }
      }
    });
  </script>
  </div>
</body>
</html>
